<div class="form-wrapper" [formGroup]="form">
    <div class="order-side-buttons flex">
        <div class="order-side-btn order-side-buy flex-grow-1" (click)="setBuyMode()"
             [ngClass]="{'active': isBuyMode()}">
            {{'buy' | translate}}
        </div>
        <div class="order-side-btn order-side-sell flex-grow-1" (click)="setSellMode()"
             [ngClass]="{'active': !isBuyMode()}">
            {{'sell' | translate}}
        </div>
    </div>

    <div class="form-wrapper">
        <div class="crypto-form-unit margin-bottom">
            <div class="form-unit__label">{{'symbol' | translate}}</div>
            <instrument-search formControlName="symbol"
                               (onSelect)="handleInstrumentChange($event)"
                               [instrumentSearchCallback]="instrumentSearchCallback"></instrument-search>
        </div>

        <div class="crypto-form-unit margin-bottom">
            <div class="form-unit__label">{{'orderTypeCaption' | translate}}</div>
            <selector formControlName="type" [options]="allowedOrderTypes" [optionCaption]="orderTypeStr"></selector>
        </div>

        <div class="crypto-form-unit margin-bottom">
            <div class="form-unit__label">{{'amount' | translate}}</div>
            <mat-form-field class="crypto-input full-width">
                <input matInput numericInput [floatOnly]="true" [range]="{min: minAmountValue}" type="text"
                       placeholder="0.0"
                       formControlName="amount">

                <span matSuffix class="input-currency">{{inputQtyCurrency}}</span>
            </mat-form-field>
        </div>

        <div class="crypto-form-unit margin-bottom" *ngIf="isLimitVisible()">
            <div class="form-unit__label">{{'limitPrice' | translate}}</div>
            <mat-form-field class="crypto-input full-width">
                <input matInput type="text" numericInput [floatOnly]="true" [range]="{min: minPriceValue}"
                       placeholder="0.0"
                       formControlName="limitPrice">

                <span matSuffix class="input-currency">{{inputLimitCurrency}}</span>
            </mat-form-field>
        </div>

        <div class="crypto-form-unit margin-bottom" *ngIf="isStopPriceVisible()">
            <div class="form-unit__label">{{'stopPrice' | translate}}</div>
            <mat-form-field class="crypto-input full-width">
                <input matInput type="text" numericInput [floatOnly]="true" [range]="{min: minPriceValue}"
                       placeholder="0.0"
                       formControlName="stopPrice">

                <span matSuffix class="input-currency">{{inputStopCurrency}}</span>
            </mat-form-field>
        </div>
    </div>
    <div class="total">
        <div class="flex justify-space-between">
            <div class="crypto-text is-secondary is-small">{{instrument?.symbol}} {{'lastPrice' | translate}}</div>
            <div class="crypto-text is-small">{{lastTick?.price}}</div>
        </div>
        <hr>
        <div class="flex justify-space-between">
            <div class="crypto-text is-secondary is-small">{{'total' | translate}}</div>
            <div class="crypto-text is-small">{{total?.toFixed(6) + ' ' + orderRusultCurrency}}</div>
        </div>
    </div>
</div>
<div class="buttons-wrapper flex justify-flex-end">
    <button class="full-width crypto-button submit-btn"
            [ngClass]="{'crypto-button_success': isBuyMode(),
                        'crypto-button_danger': !isBuyMode(),
                        'is-loading': processingSubmit}"
            (click)="submit()" [disabled]="form.invalid">
        {{submitHandler ? ('tradeManager.applyOrder' | translate) : ('tradeManager.placeOrder' | translate)}}
    </button>
</div>
