<ng-container *ngIf="hasAccess; else outOfAccess">
    <div class="root">
        <div class="header-line">

            <!-- <div class="left-side">
                <div *ngIf="isBotConnected" class="account-id">
                    <span>Agent: </span><span class="mobilehiddenacc">#{{myAutoTradingAccount}}</span>
                    <span class="mobilehiddenacc separator">|</span>
                    <span class="risk-settings" (click)="setAccountRisk($event)">Risk: {{accountRisk ? accountRisk + "%" : "..."}}</span>
                </div>
            </div> -->

            <div class="neuralagent header">
                <div class="header-left-side">


                    <div class="account-id">
                        <mat-form-field floatLabel="never" class="crypto-select bft-form-select">
                            <mat-select (selectionChange)="accountChanged($event)" [value]="myAutoTradingAccount"
                                placeholder="Select Account">
                                <mat-option *ngFor="let option of myAutoTradingAccounts" [value]="option">
                                    <div>
                                        <span class="mobilehiddenacc">#{{option}}</span>
                                    </div>
                                </mat-option>
                                <!-- <hr *ngIf="myAutoTradingAccounts?.length > 0" class="trend-index-dd-separator" /> -->
                                <mat-option (click)="manageAccounts($event)">
                                    <div>
                                        <span><i class="fa-solid fa-edit"></i></span>
                                        <span class="manage-auto-trading-account-text">Manage Accounts</span>
                                    </div>
                                </mat-option>
                            </mat-select>
                        </mat-form-field>


                    </div>
                    <span (click)="botSettings()" *ngIf="!isBotConnected" class="change-trading-mode">
                        <div class="trading-enabled">
                            <span *ngIf="!isBotConnected" class="positive-color">
                                <span class="iconx enabledx"><i class="fa-solid fa-shield-plus"></i>
                                </span>{{isSync ? "Synchronizing..." : "Connect Neural Agent"}}</span>
                        </div>
                    </span>

                    <span (click)="botSettings()" *ngIf="isBotConnected" class="change-trading-mode">
                        <div class="trading-enabled">
                            <span *ngIf="isBotConnected" class="positive-color">
                                <span class="iconx enabledx"><i class="fa-solid fa-shield-plus"></i>
                                </span> <span class="mobilehiddenx">Neural Agent</span> Connected</span>
                        </div>
                    </span>



                </div>
                <div class="right-side">

                    <div class="extended-mode hidden" (click)="setExtendedMode()" *ngIf="isBotConnected">
                        <div>{{extendedMode ? "Agent States" : "FS"}}</div>
                    </div>
                    <button (click)="toggleRiskManagement()" class="risk-management-toggle" *ngIf="isBotConnected">
                        <i class="fa-solid fa-square-sliders-vertical"></i> {{'Settings'}}
                    </button>
                    <button (click)="botLogs()" class="risk-management-toggle" *ngIf="isBotConnected">
                        <i class="fa-solid fa-list-dots"></i> {{'Logs'}}
                    </button>
                </div>
            </div>

            <div class="neuralagent riskmanagement" *ngIf="riskManagementVisible && isBotConnected">
                <!-- <div class="left-side hidden">
                    <div class="risk-management">
                        <div class="risk-management-label">Neural Agent Account</div>
         
                    </div>
                    <div class="risk-management hidden">
                        <div class="risk-management-label">Human-In-The-Loop Settings</div>
                        <div *ngIf="isBotConnected" class="bot-settings-container">
                            <mat-slide-toggle (change)="changeUseManualTradingForAccount()"
                                [checked]="userAutoTradingInfoData.useManualTrading">
                                <span *ngIf="userAutoTradingInfoData.useManualTrading">HITL Enabled</span>
                                <span *ngIf="!userAutoTradingInfoData.useManualTrading">HITL Disabled</span>
                            </mat-slide-toggle>
                        </div>
                    </div>
                </div> -->
                <div class="left-side">
                    <div class="risk-management">
                        <div class="risk-management-label"> Risk Management</div>
                        <div class="riskholder maxriskpermarket">
                            <span class="itemholderx">
                                <i class="fa-solid fa-dice-d20"></i>
                            </span> Default Risk Each Market
                            <input type="text" readonly
                                placeholder='{{defaultMarketRisk ? defaultMarketRisk + "%" : "..."}}'
                                (click)="setDefaultMarketRisk($event)">
                        </div>
                        <div class="riskholder maxriskpermarket">
                            <span class="itemholderx">
                                <i class="fa-solid fa-dice-d10"></i>
                            </span> Default Risk Each Group
                            <input type="text" readonly
                                placeholder='{{defaultGroupRisk ? defaultGroupRisk + "%" : "..."}}'
                                (click)="setDefaultGroupRisk($event)">
                        </div>
                        <div class="riskholder riskallocation">
                            <span class="itemholderx"> <i class="fa-solid fa-dice-d4"></i></span>
                            Total Risk Allocation Of Account
                            <input readonly type="text" placeholder='{{accountRisk ? accountRisk + "%" : "..."}}'
                                (click)="setAccountRisk($event)">
                        </div>
                    </div>
                </div>
                <div class="right-side">
                    <div class="general-management">
                        <div class="risk-management-label"> General</div>
                        <div class="rest-to-default">
                            <button (click)="resetToDefaultSettings()" class="rest-to-default-button">
                                <i class="fa-solid fa-file-edit"></i> {{'Reset To Default'}}
                            </button>
                        </div>
                    </div>

                </div>
            </div>

            <div class="neuralagent logs-container" *ngIf="logsVisible && isBotConnected">
                <div class="log-item bot-status">
                    <span class="log-left-side" [ngClass]="{'positive': isBotOnline, 'negative': !isBotOnline}">
                        <span>
                            <i class="icon fa-solid fa-circle"></i>
                            <span>{{isBotOnline ? "Agent Running" : "Agent Stopped "}}</span>
                            <span *ngIf="!!updateTime && !isBotOnline">{{updateTime | timeAgo}}</span>
                            <span class="na-version">{{naVersion ? naVersion : ""}}</span>
                        </span>
                    </span>
                    <span class="log-right-side">
                        <span class="refresh-log" (click)="refreshLogs()" *ngIf="!!lastLogRefreshTime; else refreshing">
                            <i class="icon fa-solid fa-refresh"></i>
                            <span>{{lastLogRefreshTime | timeAgo}}</span>
                        </span>
                        <ng-template #refreshing>
                            <span>Refreshing...</span>
                        </ng-template>
                    </span>
                </div>
                <div class="log-items-container">
                    <div class="log-item bot-log" *ngFor="let log of logs">
                        <span class="log-left-side" [ngClass]="{'natural': log.type != 1, 'negative': log.type == 1}">
                            <span>
                                >>> {{log.data}}
                            </span>
                        </span>
                        <span class="log-right-side">
                            <span>
                                {{log.date | date:'HH:mm MMM,dd'}}
                            </span>
                        </span>
                    </div>
                </div>
            </div>

        </div>

        <div class="strategy-selector">
            <div class="strategy-title">
                Trading model:
            </div>
            <div class="strategy-toggle">
                <button class="strategy-toggle-button" (click)="useSRStrategy()" [ngClass]="{'is-strategy-active': strategyType == 0}">
                    Classic
                </button>
                

                <button class="strategy-toggle-button"  (click)="useNStrategy()" [ngClass]="{'is-strategy-active': strategyType == 2}">
                    Unnamed <span class="beta">BETA</span>
                </button>

                <button class="strategy-toggle-button"  (click)="useCombinedStrategy()" [ngClass]="{'is-strategy-active': strategyType == -1}">
                    Combined <span class="beta">BETA</span>
                </button>
            </div>
            
        </div>

        <div class="chart-view" *ngIf="!!chartDataBars">
            <div class="chart-container">
                <div class="chart-container-titlex ">
                    <div>
                        <div class="bold-symbol">{{chartDataBars.symbol}}</div>
                    </div>
                    <div class="hidden">{{ formatDateToShortForm(chartDataBars.startDate) }}
                        - {{ formatDateToShortForm(chartDataBars.endDate) }} </div>
                    <div><span class="close-icon" (click)="closeCharts()"><i class="fa fa-close iconsize"></i></span>
                    </div>
                </div>
                <!--  <div class="chart-container-canvas">
                <trend-index-bar-chart [data]="chartDataBars.data" [height]="90"></trend-index-bar-chart>
            </div>-->
            </div>
            <ng-container *ngFor="let chartDataTrend of chartDataTrends">
                <div class="chart-container" [ngClass]="height-60">
                    <div class="charts-container">
                        <div class="chart-container-title">
                            <div class="datatrend">{{chartDataTrend.timeframe}}</div>
                        </div>
                        <div class="chart-item">
                            <div class="chart-container-title strength">
                                <div [class.strength-positive]="chartDataTrend.strength > 0"
                                    [class.strength-negative]="chartDataTrend.strength < 0">
                                    Strength {{chartDataTrend.strength > 0 ? "+"
                                    :""}}{{chartDataTrend.strength.toFixed(0)}}%</div>
                                <div class="phase-title">{{chartDataTrend.phase}}</div>
                            </div>
                            <trend-index-chart [data]="chartDataTrend.strengthChart" [height]="60"></trend-index-chart>
                        </div>
                    </div>
                </div>
            </ng-container>
            <ng-container *ngFor="let chartDataTrend of chartDataTrends">
                <div class="chart-container" [ngClass]="height-60">
                    <div class="charts-container">
                        <div class="chart-container-title">
                            <div class="datatrend">{{chartDataTrend.timeframe}}</div>
                        </div>

                        <div class="chart-item" *ngIf="chartDataTrend.volatilityChart.values.length > 0 ">
                            <div class="chart-container-title vol">
                                <div> Volatility </div>
                            </div>
                            <trend-index-chart [data]="chartDataTrend.volatilityChart"
                                [height]="60"></trend-index-chart>
                        </div>
                    </div>

                </div>
            </ng-container>
        </div>
        <ng-container *ngIf="emptyResponse; else data_table">
            <div class="maintenance">
                <div>Loading Neural Agent Overview...</div>
                <div>It is good to know that Neural Agent is always running and protecting your positions, even if the
                    neural overview is not available. </div>
                <div>If you continue to see this issue after 15 minutes, contact support@breakfreetrading.com </div>
            </div>
        </ng-container>
        <ng-template #groupRowHeaderTemplate let-name>
            <div class="group-header-row">
                <div class="group-header-row-title">{{name}}</div>
                <div class="group-header-row-risk">
                    <div *ngIf="isBotConnected" class="symbolx risk-cell group-risk status-holder"
                        (click)="setGroupRisk(name, $event)" tooltip
                        matTooltip="{{getRiskPerGroupText(name) + ' Risk Allowed for \'' + name + '\' related instruments'}}">
                        <span class="iconx"><i class="fa-solid fa-shield-check"></i></span>
                        <!-- <span *ngIf="vmItem.risk == -1">All</span>
                        <span *ngIf="vmItem.risk > 0">{{vmItem.risk}}% Risk</span> -->
                        <span>{{getRiskPerGroupText(name)}} Risk</span>
                    </div>
                </div>
            </div>
        </ng-template>
        <ng-template #data_table>
            <div class="data-table">
                <data-table #dataTableComponent [rows]="vm" [selectable]="true" [selectedRow]="selectedVM"
                    [columnCaption]="columnCaption" [allowColumnsVisibilityChange]="false" [trackByIndex]="false"
                    [groups]="groups" [groupingField]="groupingField"
                    [hiddenColumns]="['driver', 'min_1', 'min_5', 'min_15', 'h_1', 'h_4', 'd_1', 'month_1', 'year_1', 'year_10', 'short_g', 'mid_g', 'long_g', 'risk']"
                    (onRowSelect)="instrumentSelect($event)" (onRowClick)="rowClicked($event)"
                    (onDoubleClick)="doubleClicked($event)" (onContextMenuSelected)="handleContextMenuSelected($event)"
                    [ngClass]="{'god-view': extendedMode}" [groupRowTemplate]="groupRowHeaderTemplate">

                    <!--Columns-->

                    <data-table-header-cell columnName="symbol" [sortable]="false"
                        [columnMinWidth]="extendedMode ? 90 : 255">
                        <div class="market-state-container">

                            <div class="market-state-text">Neural Overview</div>

                            <div class="market-state-info hidden" *ngIf="isBotConnected">
                                <div class="market-state-auto">
                                    Auto: {{autoSelected}}/{{autoAvailable}}
                                    <span (click)="disableAllAutoTrading()" class="disable-all"
                                        *ngIf="canDisableAllAutoTrading()">Disable All</span><span
                                        (click)="enableAllAutoTrading()" *ngIf="canEnableAllAutoTrading()"
                                        class="enable-all">Enable All</span>


                                </div>
                                <div class="market-state-auto">
                                    Force: {{hitlSelected}}/{{hitlAvailable}}
                                    <span *ngIf="hitlSelected">
                                        <span (click)="disableAllHITLTrading()" class="disable-all">Deselect All</span>
                                    </span>
                                </div>
                                <div class="market-state-auto" *ngIf="!!maxInstrumentCount && maxInstrumentCount < 100">
                                    Limit {{maxInstrumentCount}} market(s)
                                </div>
                            </div>
                        </div>
                    </data-table-header-cell>
                    <data-table-header-cell columnName="risk" [sortable]="false" [columnMinWidth]="70"
                        [columnWidth]="70">
                        {{'State' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="driver" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="75">
                        {{'driver' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="min_1" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="75">
                        {{'min_1' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="min_5" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="75">
                        {{'min_5' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="min_15" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="75">
                        {{'min_15' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="h_1" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="75">
                        {{'h_1' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="h_4" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="75">
                        {{'h_4' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="d_1" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="75">
                        {{'d_1' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="month_1" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="75">
                        {{'month_1' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="year_1" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="75">
                        {{'year_1' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="year_10" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="75">
                        {{'year_10' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="short_g" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="45">
                        {{'short_g' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="mid_g" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="45">
                        {{'mid_g' | translate}}
                    </data-table-header-cell>
                    <data-table-header-cell columnName="long_g" [sortable]="false" [columnMinWidth]="15"
                        [columnWidth]="45">
                        {{'long_g' | translate}}
                    </data-table-header-cell>

                    <!-- Cells -->
                    <data-table-cell columnName="symbol">
                        <ng-template let-vmItem>
                            <div class="symbol-cell">
                                <div class="symbol-container">
                                    <span class="symbolx-border"
                                        [ngClass]="{'positive-border': vmItem.totalStrength > 0, 'negative-border': vmItem.totalStrength < 0}">
                                    </span>
                                    <div class="symbol-color-container">
                                        <div class="symbolholdx">
                                            <div class="middlesymbol"
                                                [ngClass]="{'active-auto-modex': isTradable(vmItem)}">
                                                <div class="execution-side">
                                                    <div class="symbol-title-container">
                                                        <div class="symbol-holder-real-OG simple-hover"
                                                            (click)="viewOnChart(vmItem)"
                                                            [ngClass]="{'active-auto-mode': isTradable(vmItem)}">
                                                            <div class="status-holder">
                                                                <div class="symbolxholder symbolxholder-hover">
                                                                    <div class="status-holder">
                                                                        <div *ngIf="!isTradable(vmItem)">
                                                                            {{vmItem.symbol}}
                                                                        </div>
                                                                        <div *ngIf="isTradable(vmItem)"
                                                                            [class.is-auto-selectedx]="isAutoSelected(vmItem)">
                                                                            {{vmItem.symbol}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <ng-container *ngIf="!botShutDown; else botSwitchedOff">
                                                            <div class="status-runner status-holder"
                                                                (click)="enableDisableTrading(vmItem)"
                                                                [ngClass]="{'active-auto-mode': isTradable(vmItem)}"
                                                                tooltip
                                                                [matTooltip]="isTradable(vmItem) ? 'Neural Agent is active' : 'Neural Agent is observing'">
                                                                <div class="symbolxholder">
                                                                    <div class="containerx"
                                                                        [ngClass]="{'active-auto-mode': isTradable(vmItem)}">
                                                                        <div class="sphere">
                                                                            <div class="cube untradeable"
                                                                                *ngIf="vmItem.tradingState == 0 || vmItem.tradingState == 3">
                                                                            </div>
                                                                            <div class="cube tradeable"
                                                                                *ngIf="vmItem.tradingState == 1">
                                                                            </div>
                                                                            <div class="cube tradeable is-auto-selectedx"
                                                                                *ngIf="vmItem.tradingState == 2">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <span
                                                                        *ngIf="isInstrumentDisabled(vmItem); else activeStatus">
                                                                        <div class="NA-state locked">
                                                                            <i
                                                                                class="fa-solid fa-lock-alt locked-icon"></i>
                                                                            <span>
                                                                                Disabled
                                                                            </span>
                                                                        </div>
                                                                    </span>
                                                                    <ng-template #activeStatus>
                                                                        <div class="NA-state"
                                                                            *ngIf="!isTradable(vmItem)">
                                                                            Observing
                                                                        </div>
                                                                        <div class="NA-state"
                                                                            *ngIf="isTradable(vmItem)">
                                                                            Active
                                                                        </div>

                                                                        <span class=" marketstateshort" tooltip
                                                                            [matTooltip]="vmItem.currentMarketState + ' ' + (vmItem.totalStrength * 100).toFixed(0) + '%'">{{vmItem.abbreviatedCurrentMarketState}}
                                                                            {{(vmItem.totalStrength *
                                                                            100).toFixed(0)}}%</span>


                                                                        <div class="symbolx statex status-holder hidden"
                                                                            [ngClass]="getRelativeStrengthClass(vmItem.totalStrength)"
                                                                            tooltip
                                                                            [matTooltip]="vmItem.currentMarketState + ' ' + (vmItem.totalStrength * 100).toFixed(0) + '%'">


                                                                            <div class="cells-holder">
                                                                                <div class=" strength-cell">
                                                                                    <trend-column
                                                                                        [extendedMode]="extendedMode"
                                                                                        [Strength]="vmItem.shortGroupStrength"
                                                                                        [StrengthValue]="vmItem.shortGroupStrengthValue"
                                                                                        [TrendPhase]="vmItem.shortGroupPhase"
                                                                                        [VolatilityValue]="vmItem.shortGroupVolatilityValue"
                                                                                        [Duration]="vmItem.shortGroupDuration"></trend-column>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </ng-template>
                                                                </div>
                                                            </div>
                                                            <ng-container [ngSwitch]="getStrategyType(vmItem)">
                                                                <ng-container *ngSwitchCase="2">
                                                                    <div class="n-strategy-label status-holder">
                                                                        <span><i class="fa-solid fa-square-n"></i></span>
                                                                    </div>
                                                                </ng-container>
                                                                <ng-container *ngSwitchCase="0">
                                                                    <div class="n-strategy-label status-holder">
                                                                        <span><i class="fa-solid fa-square-c"></i></span>
                                                                    </div>
                                                                </ng-container>
                                                            </ng-container>
                                                        </ng-container>
                                                        <ng-template #botSwitchedOff>
                                                            <div class="status-holder status-switched-off">
                                                                <span>
                                                                    Switched Off
                                                                </span>
                                                            </div>
                                                        </ng-template>

                                                    </div>

                                                    <div class="trend-side">


                                                        <div class="status-holder status-runner state"
                                                            *ngIf="vmItem.tradingState == 3" tooltip
                                                            matTooltip="Capitulation">
                                                            <div class="symbolxholder">
                                                                <div class="symbol-trade-state">
                                                                    <i class=" fa fa-heart-pulse"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="HITL active status-holder simple-hover"
                                                            (click)="instrumentSelectionChanged(vmItem, $event)"
                                                            *ngIf="((isInstrumentSelected(vmItem) && vmItem.tradingState == 1) && userAutoTradingInfoData?.useManualTrading)">
                                                            <span><i class="fa-solid fa-stop"></i> Stop</span>
                                                            <span>{{instrumentTradingDirectionText(vmItem)}}</span>
                                                        </div>
                                                        <!-- <div class="HITL available status-holder simple-hover"
                                                            (click)="instrumentSelectionChanged(vmItem, $event)"
                                                            *ngIf="(vmItem.tradingState == 1 && !isInstrumentSelected(vmItem) && userAutoTradingInfoData?.useManualTrading)">

                                                            <span> <i class="fa-solid fa-play"></i> Force Start</span>
                                                        </div> -->
                                                        <div class="HITL unavailable status-holder simple-hover"
                                                            (click)="instrumentSelectionChanged(vmItem, $event)"
                                                            *ngIf="(isInstrumentSelected(vmItem) && vmItem.tradingState != 1)  ">
                                                            <span><i class="fa-solid fa-stop"></i> Stop</span>
                                                            <span>{{instrumentTradingDirectionText(vmItem)}}</span>
                                                        </div>


                                                        <div *ngIf="isBotConnected"
                                                            class="symbolx risk-cell status-holder"
                                                            (click)="setInstrumentRisk(vmItem, $event)" tooltip
                                                            matTooltip="{{vmItem.risk > 0 ? vmItem.risk + '% Risk Allowed ' : 'All'}}">
                                                            <span class="iconx"><i
                                                                    class="fa-solid fa-shield-check"></i></span>
                                                            <span *ngIf="vmItem.risk == -1">All</span>
                                                            <span *ngIf="vmItem.risk > 0">{{vmItem.risk}}% Risk</span>
                                                        </div>

                                                        <div class="symbolx info-cell status-holder" *ngIf="isAdmin && showLogsButtons" (click)="showInfo(vmItem, $event)">
                                                            <span><i class="fa-solid fa-square-info"></i></span>
                                                        </div>
                                                        <div class="symbolx info-cell status-holder" *ngIf="isAdmin && showLogsButtons" (click)="showInfo2(vmItem, $event)">
                                                            <span><i class="fa-solid fa-info-circle"></i></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="risk">
                        <ng-template let-vmItem>
                            <!-- <div class="symbolx statex"
                            [ngClass]="getRelativeStrengthClass(vmItem.totalStrength)" tooltip
                            [matTooltip]="vmItem.currentMarketState + ' ' + (vmItem.totalStrength * 100).toFixed(0) + '%'">
                            <span class="iconx marketstateshort">{{vmItem.abbreviatedCurrentMarketState}} </span>
                            <span> {{(vmItem.totalStrength * 100).toFixed(0)}}%</span>
                        </div> -->
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="driver">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.price1Strength"
                                    [StrengthValue]="vmItem.price1StrengthValue"
                                    [VolatilityValue]="vmItem.price1VolatilityValue"
                                    [Duration]="vmItem.driveDuration"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="min_1">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.price60Strength"
                                    [StrengthValue]="vmItem.price60StrengthValue" [TrendState]="vmItem.minute1State"
                                    [TrendPhase]="vmItem.minute1Phase" [VolatilityValue]="vmItem.price60VolatilityValue"
                                    [Duration]="vmItem.minute1Duration"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="min_5">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.price300Strength"
                                    [StrengthValue]="vmItem.price300StrengthValue" [TrendState]="vmItem.minute5State"
                                    [TrendPhase]="vmItem.minute5Phase"
                                    [VolatilityValue]="vmItem.price300VolatilityValue"
                                    [Duration]="vmItem.minute5Duration"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="min_15">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.price900Strength"
                                    [StrengthValue]="vmItem.price900StrengthValue" [TrendState]="vmItem.minute15State"
                                    [TrendPhase]="vmItem.minute15Phase"
                                    [VolatilityValue]="vmItem.price900VolatilityValue"
                                    [Duration]="vmItem.minute15Duration"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="h_1">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.price3600Strength"
                                    [StrengthValue]="vmItem.price3600StrengthValue" [TrendState]="vmItem.hour1State"
                                    [TrendPhase]="vmItem.hour1Phase" [VolatilityValue]="vmItem.price3600VolatilityValue"
                                    [Duration]="vmItem.hour1Duration"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="h_4">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.price14400Strength"
                                    [StrengthValue]="vmItem.price14400StrengthValue" [TrendState]="vmItem.hour4State"
                                    [TrendPhase]="vmItem.hour4Phase"
                                    [VolatilityValue]="vmItem.price14400VolatilityValue"
                                    [Duration]="vmItem.hour4Duration"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="d_1">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.price86400Strength"
                                    [StrengthValue]="vmItem.price86400StrengthValue" [TrendState]="vmItem.dailyState"
                                    [TrendPhase]="vmItem.dailyPhase"
                                    [VolatilityValue]="vmItem.price86400VolatilityValue"
                                    [Duration]="vmItem.dailyDuration"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="month_1">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.price2592000Strength"
                                    [StrengthValue]="vmItem.price2592000StrengthValue"
                                    [TrendState]="vmItem.monthlyState" [TrendPhase]="vmItem.monthlyPhase"
                                    [VolatilityValue]="vmItem.price2592000VolatilityValue"
                                    [Duration]="vmItem.monthlyDuration"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="year_1">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.price31104000Strength"
                                    [StrengthValue]="vmItem.price31104000StrengthValue"
                                    [TrendPhase]="vmItem.yearlyPhase" [TrendState]="vmItem.yearlyState"
                                    [VolatilityValue]="vmItem.price31104000VolatilityValue"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="year_10">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.price311040000Strength"
                                    [StrengthValue]="vmItem.price311040000StrengthValue"
                                    [TrendPhase]="vmItem.year10Phase" [TrendState]="vmItem.year10State"
                                    [VolatilityValue]="vmItem.price311040000VolatilityValue"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>


                    <data-table-cell columnName="short_g">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.shortGroupStrength"
                                    [StrengthValue]="vmItem.shortGroupStrengthValue"
                                    [TrendPhase]="vmItem.shortGroupPhase"
                                    [VolatilityValue]="vmItem.shortGroupVolatilityValue"
                                    [Duration]="vmItem.shortGroupDuration"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="mid_g">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.midGroupStrength"
                                    [StrengthValue]="vmItem.midGroupStrengthValue" [TrendPhase]="vmItem.midGroupPhase"
                                    [VolatilityValue]="vmItem.midGroupVolatilityValue"
                                    [Duration]="vmItem.midGroupDuration"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>
                    <data-table-cell columnName="long_g">
                        <ng-template let-vmItem>
                            <div class="strength-cell">
                                <trend-column [extendedMode]="extendedMode" [Strength]="vmItem.longGroupStrength"
                                    [StrengthValue]="vmItem.longGroupStrengthValue" [TrendPhase]="vmItem.longGroupPhase"
                                    [VolatilityValue]="vmItem.longGroupVolatilityValue"
                                    [Duration]="vmItem.longGroupDuration"></trend-column>
                            </div>
                        </ng-template>
                    </data-table-cell>

                    <!-- <data-table-menu-item [id]="'trade'">
                        <ng-template>
                            {{isSelectedInstrumentTradable() ? "Stop Force Trading" : "Force Start Trading"}}
                        </ng-template>
                    </data-table-menu-item> -->
                    <!--   <data-table-menu-item [id]="'openCharts'">
                        <ng-template>
                            View Analysis
                        </ng-template>
                    </data-table-menu-item> -->
                    <data-table-menu-item [id]="'viewOnChart'">
                        <ng-template>
                            View Chart
                        </ng-template>
                    </data-table-menu-item>
                    <data-table-menu-item [id]="'disableMarket'">
                        <ng-template>
                            {{isMarketDisabled() ? "Enable Market" : "Disable Market"}}
                        </ng-template>
                    </data-table-menu-item>
                </data-table>
            </div>
        </ng-template>
    </div>

    <bft-loader *ngIf="loading"></bft-loader>
</ng-container>

<ng-template #outOfAccess>
    <div class="out-of-access" (click)="processCheckout()">
        <div class="out-of-access-box">
            <div class="image">
                <img class="BFTimage" src="assets/img/bftnavigatorlogo.svg">
            </div>
            <div class="text">
                Upgrade your subscription to get access to Trend Index.
            </div>
        </div>
    </div>
</ng-template>